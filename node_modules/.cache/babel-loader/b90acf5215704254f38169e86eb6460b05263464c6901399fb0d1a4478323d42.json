{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,ReferenceLine}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[data,setData]=useState([]);const[timeFrame,setTimeFrame]=useState('1Y');const[signal,setSignal]=useState({message:'Loading...',color:'text-gray-500'});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[historicalSignals,setHistoricalSignals]=useState([]);const[averageReturn,setAverageReturn]=useState(null);const[average6MonthReturn,setAverage6MonthReturn]=useState(null);const[benchmarkAverageReturn,setBenchmarkAverageReturn]=useState(null);const[customStartDate,setCustomStartDate]=useState('');const[customEndDate,setCustomEndDate]=useState('');// --- Data fetching function for Yahoo Finance ---\nconst fetchData=useCallback(async()=>{if(timeFrame==='Custom'&&(!customStartDate||!customEndDate)){setError(\"Please select both a start and end date for the custom range.\");return;}setIsLoading(true);setError(null);setHistoricalSignals([]);setAverageReturn(null);setAverage6MonthReturn(null);setBenchmarkAverageReturn(null);setSignal({message:'Loading Data...',color:'text-gray-500'});// --- Determine display start and end dates ---\nlet displayStartDate,displayEndDate;const today=new Date();if(timeFrame==='Custom'){displayStartDate=new Date(customStartDate);displayEndDate=new Date(customEndDate);}else{displayEndDate=new Date();// today\ndisplayStartDate=new Date();let yearsToSubtract=1;switch(timeFrame){case'2Y':yearsToSubtract=2;break;case'5Y':yearsToSubtract=5;break;case'10Y':yearsToSubtract=10;break;case'20Y':yearsToSubtract=20;break;case'50Y':yearsToSubtract=50;break;default:yearsToSubtract=1;}displayStartDate.setFullYear(displayStartDate.getFullYear()-yearsToSubtract);}// --- Determine fetch start and end dates ---\nconst fetchStartDate=displayStartDate;const fetchEndDate=new Date(displayEndDate);fetchEndDate.setFullYear(fetchEndDate.getFullYear()+1);const startDateStamp=Math.floor(fetchStartDate.getTime()/1000);const endDateStamp=Math.min(Math.floor(fetchEndDate.getTime()/1000),Math.floor(today.getTime()/1000));// --- Yahoo Finance API URLs with a CORS Proxy ---\nconst proxyUrl='https://corsproxy.io/?';const originalSpxUrl=`https://query1.finance.yahoo.com/v8/finance/chart/%5EGSPC?period1=${startDateStamp}&period2=${endDateStamp}&interval=1d&events=history`;const originalVixUrl=`https://query1.finance.yahoo.com/v8/finance/chart/%5EVIX?period1=${startDateStamp}&period2=${endDateStamp}&interval=1d&events=history`;const spxUrl=proxyUrl+encodeURIComponent(originalSpxUrl);const vixUrl=proxyUrl+encodeURIComponent(originalVixUrl);try{const[spxResponse,vixResponse]=await Promise.all([fetch(spxUrl),fetch(vixUrl)]);if(!spxResponse.ok||!vixResponse.ok){throw new Error('Failed to fetch data from Yahoo Finance. The service or CORS proxy may be temporarily unavailable.');}const spxJson=await spxResponse.json();const vixJson=await vixResponse.json();// --- Parse Yahoo Finance data structure ---\nconst parseYahooData=jsonData=>{if(!jsonData.chart.result)return[];const result=jsonData.chart.result[0];if(!result)return[];const timestamps=result.timestamp;const prices=result.indicators.quote[0].close;return timestamps.map((ts,i)=>({date:new Date(ts*1000).toISOString().split('T')[0],price:prices[i]?parseFloat(prices[i].toFixed(2)):null})).filter(d=>d.price!==null);};const spxData=parseYahooData(spxJson);const vixData=parseYahooData(vixJson);// --- Combine S&P 500 and VIX data ---\nconst combinedData=spxData.map(spxPoint=>{const vixPoint=vixData.find(vix=>vix.date===spxPoint.date);return{date:spxPoint.date,spx:spxPoint.price,vix:vixPoint?vixPoint.price:null};}).filter(point=>point.vix!==null);// Filter data to the selected timeframe for display on the chart\nconst finalDisplayData=combinedData.filter(d=>{const dDate=new Date(d.date);return dDate>=displayStartDate&&dDate<=displayEndDate;});setData(finalDisplayData);// --- Signal Logic & Historical Analysis ---\nconst signals=[];for(let i=1;i<combinedData.length;i++){const currentPoint=combinedData[i];const previousPoint=combinedData[i-1];if(previousPoint.vix>30&&currentPoint.vix<previousPoint.vix){const sixMonthForwardDate=new Date(new Date(currentPoint.date).setMonth(new Date(currentPoint.date).getMonth()+6));const twelveMonthForwardDate=new Date(new Date(currentPoint.date).setFullYear(new Date(currentPoint.date).getFullYear()+1));const sixMonthForwardPoint=combinedData.find(p=>new Date(p.date)>=sixMonthForwardDate);const twelveMonthForwardPoint=combinedData.find(p=>new Date(p.date)>=twelveMonthForwardDate);let sixMonthReturn=null;let twelveMonthReturn=null;if(sixMonthForwardPoint){sixMonthReturn=(sixMonthForwardPoint.spx-currentPoint.spx)/currentPoint.spx*100;}if(twelveMonthForwardPoint){twelveMonthReturn=(twelveMonthForwardPoint.spx-currentPoint.spx)/currentPoint.spx*100;}signals.push({date:currentPoint.date,spxOnSignal:currentPoint.spx,vixOnSignal:currentPoint.vix,sixMonthForwardReturn:sixMonthReturn!==null?sixMonthReturn.toFixed(2):null,forwardReturn:twelveMonthReturn!==null?twelveMonthReturn.toFixed(2):null});}}const filteredSignals=signals.filter(s=>{const sDate=new Date(s.date);return sDate>=displayStartDate&&sDate<=displayEndDate;});setHistoricalSignals(filteredSignals);if(filteredSignals.length>0){const signalsWith6MReturns=filteredSignals.filter(s=>s.sixMonthForwardReturn!==null);if(signalsWith6MReturns.length>0){const total6MReturn=signalsWith6MReturns.reduce((acc,signal)=>acc+parseFloat(signal.sixMonthForwardReturn),0);setAverage6MonthReturn((total6MReturn/signalsWith6MReturns.length).toFixed(2));}const signalsWith12MReturns=filteredSignals.filter(s=>s.forwardReturn!==null);if(signalsWith12MReturns.length>0){const total12MReturn=signalsWith12MReturns.reduce((acc,signal)=>acc+parseFloat(signal.forwardReturn),0);setAverageReturn((total12MReturn/signalsWith12MReturns.length).toFixed(2));}}// --- Calculate Benchmark Average Return ---\nconst benchmarkReturns=[];for(let i=0;i<finalDisplayData.length;i++){const currentPoint=finalDisplayData[i];const forwardDate=new Date(new Date(currentPoint.date).setFullYear(new Date(currentPoint.date).getFullYear()+1));const forwardPoint=combinedData.find(p=>new Date(p.date)>=forwardDate);if(forwardPoint){const returnVal=(forwardPoint.spx-currentPoint.spx)/currentPoint.spx*100;benchmarkReturns.push(returnVal);}}if(benchmarkReturns.length>0){const totalBenchmarkReturn=benchmarkReturns.reduce((acc,val)=>acc+val,0);setBenchmarkAverageReturn((totalBenchmarkReturn/benchmarkReturns.length).toFixed(2));}if(finalDisplayData.length>=2){const latestPoint=finalDisplayData[finalDisplayData.length-1];const previousPoint=finalDisplayData[finalDisplayData.length-2];if(previousPoint.vix>30&&latestPoint.vix<previousPoint.vix){setSignal({message:'Good Time to Enter',color:'text-green-500'});}else if(latestPoint.vix>30){setSignal({message:'High Fear: Monitor',color:'text-yellow-500'});}else{setSignal({message:'Wait',color:'text-red-500'});}}else{setSignal({message:'No Data',color:'text-yellow-500'});}}catch(err){setError(err.message);setSignal({message:'Error',color:'text-red-500'});}finally{setIsLoading(false);}},[timeFrame,customStartDate,customEndDate]);useEffect(()=>{if(timeFrame!=='Custom'){fetchData();}},[timeFrame,fetchData]);const handleCustomDateSubmit=()=>{if(customStartDate&&customEndDate){if(new Date(customStartDate)>new Date(customEndDate)){setError(\"Start date cannot be after end date.\");return;}fetchData();}else{setError(\"Please select both a start and end date.\");}};const formattedData=useMemo(()=>{return data.map(d=>({...d,date:new Date(d.date).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'})}));},[data]);const formatXAxis=tickItem=>{const date=new Date(tickItem);if(timeFrame==='1Y'||timeFrame==='2Y'||timeFrame==='5Y'){const month=date.toLocaleDateString('en-US',{month:'short'});const year=date.getFullYear().toString().slice(-2);return`${month}'${year}`;}return date.getFullYear();};const timeFrames=['1Y','2Y','5Y','10Y','20Y','50Y','Custom'];return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 text-white min-h-screen p-4 sm:p-6 lg:p-8 font-sans\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl sm:text-4xl font-bold text-cyan-400\",children:\"S&P 500 & VIX Market Entry Analyzer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Using the VIX as a market sentiment indicator to find potential entry points. Data from Yahoo Finance.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 flex justify-center flex-wrap items-center gap-2\",children:timeFrames.map(tf=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTimeFrame(tf),disabled:isLoading,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${timeFrame===tf?'bg-cyan-500 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'} disabled:opacity-50 disabled:cursor-not-allowed`,children:tf},tf))}),timeFrame==='Custom'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-end gap-4 mb-6 bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startDate\",className:\"block text-sm font-medium text-gray-300 mb-1\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"startDate\",value:customStartDate,onChange:e=>setCustomStartDate(e.target.value),className:\"bg-gray-700 text-white p-2 rounded-md border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"endDate\",className:\"block text-sm font-medium text-gray-300 mb-1\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"endDate\",value:customEndDate,onChange:e=>setCustomEndDate(e.target.value),className:\"bg-gray-700 text-white p-2 rounded-md border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:outline-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCustomDateSubmit,disabled:isLoading,className:\"bg-cyan-500 text-white px-4 py-2 rounded-md hover:bg-cyan-600 transition-colors disabled:opacity-50\",children:\"Apply\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4 text-white\",children:[\"S&P 500 vs. VIX (\",timeFrame==='Custom'&&customStartDate&&customEndDate?`${customStartDate} to ${customEndDate}`:timeFrame,\")\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:400,children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full text-gray-400\",children:\"Loading chart data...\"}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full p-4 text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchData,className:\"mt-4 px-4 py-2 bg-cyan-500 text-white rounded-md hover:bg-cyan-600 transition-colors\",children:\"Retry\"})]}):data.length>0?/*#__PURE__*/_jsxs(LineChart,{data:formattedData,margin:{top:5,right:20,left:-10,bottom:5},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#4A5568\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\",stroke:\"#A0AEC0\",tick:{fontSize:12},tickFormatter:formatXAxis}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"left\",stroke:\"#63B3ED\",label:{value:'S&P 500 (^GSPC)',angle:-90,position:'insideLeft',fill:'#63B3ED'},tick:{fontSize:12},domain:['dataMin','dataMax']}),/*#__PURE__*/_jsx(YAxis,{yAxisId:\"right\",orientation:\"right\",stroke:\"#F6E05E\",label:{value:'VIX (^VIX)',angle:90,position:'insideRight',fill:'#F6E05E'},tick:{fontSize:12}}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'#1A202C',border:'1px solid #4A5568'},labelStyle:{color:'#E2E8F0'}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{yAxisId:\"left\",type:\"monotone\",dataKey:\"spx\",stroke:\"#63B3ED\",strokeWidth:2,dot:false,name:\"S&P 500\"}),/*#__PURE__*/_jsx(Line,{yAxisId:\"right\",type:\"monotone\",dataKey:\"vix\",stroke:\"#F6E05E\",strokeWidth:2,dot:false,name:\"VIX\"}),/*#__PURE__*/_jsx(ReferenceLine,{yAxisId:\"right\",y:30,label:{value:\"High Fear\",position:\"insideTopRight\",fill:\"#A0AEC0\"},stroke:\"#FC8181\",strokeDasharray:\"3 3\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full text-gray-400\",children:\"No data available for the selected range.\"})}),!isLoading&&data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-around gap-x-4 text-center\",children:[average6MonthReturn!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 block text-sm\",children:\"Signal Avg 6M Return\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-bold text-xl ${average6MonthReturn>0?'text-green-400':'text-red-400'}`,children:[average6MonthReturn,\"%\"]})]}),averageReturn!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 block text-sm\",children:\"Signal Avg 12M Return\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-bold text-xl ${averageReturn>0?'text-green-400':'text-red-400'}`,children:[averageReturn,\"%\"]})]}),benchmarkAverageReturn!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 block text-sm\",children:\"S&P 500 Avg 12M Return\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-bold text-xl ${benchmarkAverageReturn>0?'text-green-400':'text-red-400'}`,children:[benchmarkAverageReturn,\"%\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-xl shadow-lg text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-white\",children:\"Market Entry Signal\"}),/*#__PURE__*/_jsx(\"p\",{className:`text-4xl font-bold ${signal.color}`,children:signal.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Based on latest data\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-white\",children:\"Latest Data\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"S&P 500:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-blue-400\",children:!isLoading&&data.length>0?data[data.length-1].spx.toFixed(2):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"VIX:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-yellow-400\",children:!isLoading&&data.length>0&&data[data.length-1].vix?data[data.length-1].vix.toFixed(2):'N/A'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2 text-white\",children:\"Methodology\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 text-sm\",children:[\"This tool uses the VIX, often called the \\\"fear index,\\\" to gauge market sentiment. A high VIX suggests fear and potential market bottoms.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"The signal turns to \",/*#__PURE__*/_jsx(\"strong\",{className:\"text-green-500\",children:\"\\\"Good Time to Enter\\\"\"}),\" when the VIX has been high (above 30) and shows signs of declining, suggesting fear is subsiding. This is a contrarian indicator.\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-gray-800 rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-white mb-4\",children:[\"Historical Buy Signals (\",timeFrame==='Custom'&&customStartDate&&customEndDate?`${customStartDate} to ${customEndDate}`:timeFrame,\")\"]}),!isLoading&&data.length>0&&(historicalSignals.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto max-h-96\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm text-left text-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-xs text-cyan-400 uppercase bg-gray-700 sticky top-0\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"S&P 500\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"VIX\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"6-Month Return\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"12-Month Return\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:historicalSignals.map((signal,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-800 border-b border-gray-700 hover:bg-gray-600\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:new Date(signal.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:signal.spxOnSignal.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:signal.vixOnSignal.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:`px-6 py-4 font-bold ${signal.sixMonthForwardReturn===null?'text-gray-400':parseFloat(signal.sixMonthForwardReturn)>0?'text-green-400':'text-red-400'}`,children:signal.sixMonthForwardReturn!==null?`${signal.sixMonthForwardReturn}%`:'Pending...'}),/*#__PURE__*/_jsx(\"td\",{className:`px-6 py-4 font-bold ${signal.forwardReturn===null?'text-gray-400':parseFloat(signal.forwardReturn)>0?'text-green-400':'text-red-400'}`,children:signal.forwardReturn!==null?`${signal.forwardReturn}%`:'Pending...'})]},index))})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-400 py-8\",children:\"No historical buy signals found for this period.\"})),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-400 py-8\",children:\"Loading historical data...\"})]})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ReferenceLine","jsx","_jsx","jsxs","_jsxs","App","data","setData","timeFrame","setTimeFrame","signal","setSignal","message","color","isLoading","setIsLoading","error","setError","historicalSignals","setHistoricalSignals","averageReturn","setAverageReturn","average6MonthReturn","setAverage6MonthReturn","benchmarkAverageReturn","setBenchmarkAverageReturn","customStartDate","setCustomStartDate","customEndDate","setCustomEndDate","fetchData","displayStartDate","displayEndDate","today","Date","yearsToSubtract","setFullYear","getFullYear","fetchStartDate","fetchEndDate","startDateStamp","Math","floor","getTime","endDateStamp","min","proxyUrl","originalSpxUrl","originalVixUrl","spxUrl","encodeURIComponent","vixUrl","spxResponse","vixResponse","Promise","all","fetch","ok","Error","spxJson","json","vixJson","parseYahooData","jsonData","chart","result","timestamps","timestamp","prices","indicators","quote","close","map","ts","i","date","toISOString","split","price","parseFloat","toFixed","filter","d","spxData","vixData","combinedData","spxPoint","vixPoint","find","vix","spx","point","finalDisplayData","dDate","signals","length","currentPoint","previousPoint","sixMonthForwardDate","setMonth","getMonth","twelveMonthForwardDate","sixMonthForwardPoint","p","twelveMonthForwardPoint","sixMonthReturn","twelveMonthReturn","push","spxOnSignal","vixOnSignal","sixMonthForwardReturn","forwardReturn","filteredSignals","s","sDate","signalsWith6MReturns","total6MReturn","reduce","acc","signalsWith12MReturns","total12MReturn","benchmarkReturns","forwardDate","forwardPoint","returnVal","totalBenchmarkReturn","val","latestPoint","err","handleCustomDateSubmit","formattedData","toLocaleDateString","year","month","day","formatXAxis","tickItem","toString","slice","timeFrames","className","children","tf","onClick","disabled","htmlFor","type","id","value","onChange","e","target","width","height","margin","top","right","left","bottom","strokeDasharray","stroke","dataKey","tick","fontSize","tickFormatter","yAxisId","label","angle","position","fill","domain","orientation","contentStyle","backgroundColor","border","labelStyle","strokeWidth","dot","name","y","scope","index"],"sources":["/Users/peterwaring/repos/sp500-vix-analyzer/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceLine } from 'recharts';\n\nconst App = () => {\n  const [data, setData] = useState([]);\n  const [timeFrame, setTimeFrame] = useState('1Y');\n  const [signal, setSignal] = useState({ message: 'Loading...', color: 'text-gray-500' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [historicalSignals, setHistoricalSignals] = useState([]);\n  const [averageReturn, setAverageReturn] = useState(null);\n  const [average6MonthReturn, setAverage6MonthReturn] = useState(null);\n  const [benchmarkAverageReturn, setBenchmarkAverageReturn] = useState(null);\n  const [customStartDate, setCustomStartDate] = useState('');\n  const [customEndDate, setCustomEndDate] = useState('');\n\n\n  // --- Data fetching function for Yahoo Finance ---\n  const fetchData = useCallback(async () => {\n    if (timeFrame === 'Custom' && (!customStartDate || !customEndDate)) {\n        setError(\"Please select both a start and end date for the custom range.\");\n        return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setHistoricalSignals([]);\n    setAverageReturn(null);\n    setAverage6MonthReturn(null);\n    setBenchmarkAverageReturn(null);\n    setSignal({ message: 'Loading Data...', color: 'text-gray-500' });\n\n    // --- Determine display start and end dates ---\n    let displayStartDate, displayEndDate;\n    const today = new Date();\n\n    if (timeFrame === 'Custom') {\n        displayStartDate = new Date(customStartDate);\n        displayEndDate = new Date(customEndDate);\n    } else {\n        displayEndDate = new Date(); // today\n        displayStartDate = new Date();\n        let yearsToSubtract = 1;\n        switch(timeFrame) {\n            case '2Y': yearsToSubtract = 2; break;\n            case '5Y': yearsToSubtract = 5; break;\n            case '10Y': yearsToSubtract = 10; break;\n            case '20Y': yearsToSubtract = 20; break;\n            case '50Y': yearsToSubtract = 50; break;\n            default: yearsToSubtract = 1;\n        }\n        displayStartDate.setFullYear(displayStartDate.getFullYear() - yearsToSubtract);\n    }\n    \n    // --- Determine fetch start and end dates ---\n    const fetchStartDate = displayStartDate;\n    const fetchEndDate = new Date(displayEndDate);\n    fetchEndDate.setFullYear(fetchEndDate.getFullYear() + 1);\n\n    const startDateStamp = Math.floor(fetchStartDate.getTime() / 1000);\n    const endDateStamp = Math.min(Math.floor(fetchEndDate.getTime() / 1000), Math.floor(today.getTime() / 1000));\n\n\n    // --- Yahoo Finance API URLs with a CORS Proxy ---\n    const proxyUrl = 'https://corsproxy.io/?';\n    const originalSpxUrl = `https://query1.finance.yahoo.com/v8/finance/chart/%5EGSPC?period1=${startDateStamp}&period2=${endDateStamp}&interval=1d&events=history`;\n    const originalVixUrl = `https://query1.finance.yahoo.com/v8/finance/chart/%5EVIX?period1=${startDateStamp}&period2=${endDateStamp}&interval=1d&events=history`;\n\n    const spxUrl = proxyUrl + encodeURIComponent(originalSpxUrl);\n    const vixUrl = proxyUrl + encodeURIComponent(originalVixUrl);\n\n    try {\n      const [spxResponse, vixResponse] = await Promise.all([\n        fetch(spxUrl),\n        fetch(vixUrl)\n      ]);\n\n      if (!spxResponse.ok || !vixResponse.ok) {\n        throw new Error('Failed to fetch data from Yahoo Finance. The service or CORS proxy may be temporarily unavailable.');\n      }\n\n      const spxJson = await spxResponse.json();\n      const vixJson = await vixResponse.json();\n\n      // --- Parse Yahoo Finance data structure ---\n      const parseYahooData = (jsonData) => {\n        if (!jsonData.chart.result) return [];\n        const result = jsonData.chart.result[0];\n        if (!result) return [];\n        const timestamps = result.timestamp;\n        const prices = result.indicators.quote[0].close;\n        return timestamps.map((ts, i) => ({\n          date: new Date(ts * 1000).toISOString().split('T')[0],\n          price: prices[i] ? parseFloat(prices[i].toFixed(2)) : null\n        })).filter(d => d.price !== null);\n      };\n\n      const spxData = parseYahooData(spxJson);\n      const vixData = parseYahooData(vixJson);\n\n      // --- Combine S&P 500 and VIX data ---\n      const combinedData = spxData.map((spxPoint) => {\n        const vixPoint = vixData.find(vix => vix.date === spxPoint.date);\n        return {\n          date: spxPoint.date,\n          spx: spxPoint.price,\n          vix: vixPoint ? vixPoint.price : null,\n        };\n      }).filter(point => point.vix !== null);\n\n      // Filter data to the selected timeframe for display on the chart\n      const finalDisplayData = combinedData.filter(d => {\n        const dDate = new Date(d.date);\n        return dDate >= displayStartDate && dDate <= displayEndDate;\n      });\n      setData(finalDisplayData);\n\n      // --- Signal Logic & Historical Analysis ---\n      const signals = [];\n      for (let i = 1; i < combinedData.length; i++) {\n        const currentPoint = combinedData[i];\n        const previousPoint = combinedData[i-1];\n\n        if (previousPoint.vix > 30 && currentPoint.vix < previousPoint.vix) {\n          const sixMonthForwardDate = new Date(new Date(currentPoint.date).setMonth(new Date(currentPoint.date).getMonth() + 6));\n          const twelveMonthForwardDate = new Date(new Date(currentPoint.date).setFullYear(new Date(currentPoint.date).getFullYear() + 1));\n          \n          const sixMonthForwardPoint = combinedData.find(p => new Date(p.date) >= sixMonthForwardDate);\n          const twelveMonthForwardPoint = combinedData.find(p => new Date(p.date) >= twelveMonthForwardDate);\n          \n          let sixMonthReturn = null;\n          let twelveMonthReturn = null;\n\n          if (sixMonthForwardPoint) {\n            sixMonthReturn = ((sixMonthForwardPoint.spx - currentPoint.spx) / currentPoint.spx) * 100;\n          }\n          if (twelveMonthForwardPoint) {\n            twelveMonthReturn = ((twelveMonthForwardPoint.spx - currentPoint.spx) / currentPoint.spx) * 100;\n          }\n\n          signals.push({\n            date: currentPoint.date,\n            spxOnSignal: currentPoint.spx,\n            vixOnSignal: currentPoint.vix,\n            sixMonthForwardReturn: sixMonthReturn !== null ? sixMonthReturn.toFixed(2) : null,\n            forwardReturn: twelveMonthReturn !== null ? twelveMonthReturn.toFixed(2) : null,\n          });\n        }\n      }\n      \n      const filteredSignals = signals.filter(s => {\n        const sDate = new Date(s.date);\n        return sDate >= displayStartDate && sDate <= displayEndDate;\n      });\n      setHistoricalSignals(filteredSignals);\n\n      if (filteredSignals.length > 0) {\n        const signalsWith6MReturns = filteredSignals.filter(s => s.sixMonthForwardReturn !== null);\n        if (signalsWith6MReturns.length > 0) {\n            const total6MReturn = signalsWith6MReturns.reduce((acc, signal) => acc + parseFloat(signal.sixMonthForwardReturn), 0);\n            setAverage6MonthReturn((total6MReturn / signalsWith6MReturns.length).toFixed(2));\n        }\n\n        const signalsWith12MReturns = filteredSignals.filter(s => s.forwardReturn !== null);\n        if (signalsWith12MReturns.length > 0) {\n            const total12MReturn = signalsWith12MReturns.reduce((acc, signal) => acc + parseFloat(signal.forwardReturn), 0);\n            setAverageReturn((total12MReturn / signalsWith12MReturns.length).toFixed(2));\n        }\n      }\n\n      // --- Calculate Benchmark Average Return ---\n      const benchmarkReturns = [];\n      for (let i = 0; i < finalDisplayData.length; i++) {\n        const currentPoint = finalDisplayData[i];\n        const forwardDate = new Date(new Date(currentPoint.date).setFullYear(new Date(currentPoint.date).getFullYear() + 1));\n        const forwardPoint = combinedData.find(p => new Date(p.date) >= forwardDate);\n        if (forwardPoint) {\n            const returnVal = ((forwardPoint.spx - currentPoint.spx) / currentPoint.spx) * 100;\n            benchmarkReturns.push(returnVal);\n        }\n      }\n      if (benchmarkReturns.length > 0) {\n        const totalBenchmarkReturn = benchmarkReturns.reduce((acc, val) => acc + val, 0);\n        setBenchmarkAverageReturn((totalBenchmarkReturn / benchmarkReturns.length).toFixed(2));\n      }\n\n      if (finalDisplayData.length >= 2) {\n        const latestPoint = finalDisplayData[finalDisplayData.length - 1];\n        const previousPoint = finalDisplayData[finalDisplayData.length - 2];\n        if (previousPoint.vix > 30 && latestPoint.vix < previousPoint.vix) {\n          setSignal({ message: 'Good Time to Enter', color: 'text-green-500' });\n        } else if (latestPoint.vix > 30) {\n          setSignal({ message: 'High Fear: Monitor', color: 'text-yellow-500' });\n        } else {\n          setSignal({ message: 'Wait', color: 'text-red-500' });\n        }\n      } else {\n        setSignal({ message: 'No Data', color: 'text-yellow-500' });\n      }\n\n    } catch (err) {\n      setError(err.message);\n      setSignal({ message: 'Error', color: 'text-red-500' });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [timeFrame, customStartDate, customEndDate]);\n\n  useEffect(() => {\n    if (timeFrame !== 'Custom') {\n        fetchData();\n    }\n  }, [timeFrame, fetchData]);\n  \n  const handleCustomDateSubmit = () => {\n    if (customStartDate && customEndDate) {\n        if (new Date(customStartDate) > new Date(customEndDate)) {\n            setError(\"Start date cannot be after end date.\");\n            return;\n        }\n        fetchData();\n    } else {\n        setError(\"Please select both a start and end date.\");\n    }\n  }\n\n  const formattedData = useMemo(() => {\n    return data.map(d => ({\n      ...d,\n      date: new Date(d.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })\n    }));\n  }, [data]);\n\n  const formatXAxis = (tickItem) => {\n    const date = new Date(tickItem);\n    if (timeFrame === '1Y' || timeFrame === '2Y' || timeFrame === '5Y') {\n        const month = date.toLocaleDateString('en-US', { month: 'short' });\n        const year = date.getFullYear().toString().slice(-2);\n        return `${month}'${year}`;\n    }\n    return date.getFullYear();\n  };\n\n  const timeFrames = ['1Y', '2Y', '5Y', '10Y', '20Y', '50Y', 'Custom'];\n\n  return (\n    <div className=\"bg-gray-900 text-white min-h-screen p-4 sm:p-6 lg:p-8 font-sans\">\n      <div className=\"max-w-7xl mx-auto\">\n        <header className=\"mb-6\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-cyan-400\">S&P 500 & VIX Market Entry Analyzer</h1>\n          <p className=\"text-gray-400 mt-2\">Using the VIX as a market sentiment indicator to find potential entry points. Data from Yahoo Finance.</p>\n        </header>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2\">\n            <div className=\"mb-4 flex justify-center flex-wrap items-center gap-2\">\n                {timeFrames.map(tf => (\n                    <button key={tf} onClick={() => setTimeFrame(tf)} disabled={isLoading} className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${ timeFrame === tf ? 'bg-cyan-500 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600' } disabled:opacity-50 disabled:cursor-not-allowed`}>\n                        {tf}\n                    </button>\n                ))}\n            </div>\n\n            {timeFrame === 'Custom' && (\n                <div className=\"flex justify-center items-end gap-4 mb-6 bg-gray-800 p-4 rounded-lg\">\n                    <div>\n                        <label htmlFor=\"startDate\" className=\"block text-sm font-medium text-gray-300 mb-1\">Start Date</label>\n                        <input type=\"date\" id=\"startDate\" value={customStartDate} onChange={e => setCustomStartDate(e.target.value)} className=\"bg-gray-700 text-white p-2 rounded-md border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:outline-none\"/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"endDate\" className=\"block text-sm font-medium text-gray-300 mb-1\">End Date</label>\n                        <input type=\"date\" id=\"endDate\" value={customEndDate} onChange={e => setCustomEndDate(e.target.value)} className=\"bg-gray-700 text-white p-2 rounded-md border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:outline-none\"/>\n                    </div>\n                    <button onClick={handleCustomDateSubmit} disabled={isLoading} className=\"bg-cyan-500 text-white px-4 py-2 rounded-md hover:bg-cyan-600 transition-colors disabled:opacity-50\">Apply</button>\n                </div>\n            )}\n            \n            <div className=\"bg-gray-800 p-6 rounded-xl shadow-lg\">\n                <h2 className=\"text-xl font-semibold mb-4 text-white\">S&P 500 vs. VIX ({timeFrame === 'Custom' && customStartDate && customEndDate ? `${customStartDate} to ${customEndDate}` : timeFrame})</h2>\n                <ResponsiveContainer width=\"100%\" height={400}>\n                    {isLoading ? ( <div className=\"flex items-center justify-center h-full text-gray-400\">Loading chart data...</div>\n                    ) : error ? ( <div className=\"flex flex-col items-center justify-center h-full p-4 text-center\"><span className=\"text-red-400\">{error}</span><button onClick={fetchData} className=\"mt-4 px-4 py-2 bg-cyan-500 text-white rounded-md hover:bg-cyan-600 transition-colors\">Retry</button></div>\n                    ) : data.length > 0 ? (\n                        <LineChart data={formattedData} margin={{ top: 5, right: 20, left: -10, bottom: 5 }}>\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#4A5568\" />\n                            <XAxis dataKey=\"date\" stroke=\"#A0AEC0\" tick={{ fontSize: 12 }} tickFormatter={formatXAxis} />\n                            <YAxis yAxisId=\"left\" stroke=\"#63B3ED\" label={{ value: 'S&P 500 (^GSPC)', angle: -90, position: 'insideLeft', fill: '#63B3ED' }} tick={{ fontSize: 12 }} domain={['dataMin', 'dataMax']} />\n                            <YAxis yAxisId=\"right\" orientation=\"right\" stroke=\"#F6E05E\" label={{ value: 'VIX (^VIX)', angle: 90, position: 'insideRight', fill: '#F6E05E' }} tick={{ fontSize: 12 }} />\n                            <Tooltip contentStyle={{ backgroundColor: '#1A202C', border: '1px solid #4A5568' }} labelStyle={{ color: '#E2E8F0' }} />\n                            <Legend />\n                            <Line yAxisId=\"left\" type=\"monotone\" dataKey=\"spx\" stroke=\"#63B3ED\" strokeWidth={2} dot={false} name=\"S&P 500\" />\n                            <Line yAxisId=\"right\" type=\"monotone\" dataKey=\"vix\" stroke=\"#F6E05E\" strokeWidth={2} dot={false} name=\"VIX\" />\n                            <ReferenceLine yAxisId=\"right\" y={30} label={{ value: \"High Fear\", position: \"insideTopRight\", fill: \"#A0AEC0\" }} stroke=\"#FC8181\" strokeDasharray=\"3 3\" />\n                        </LineChart>\n                    ) : ( <div className=\"flex items-center justify-center h-full text-gray-400\">No data available for the selected range.</div> )}\n                </ResponsiveContainer>\n                {/* --- Average Returns Display --- */}\n                {!isLoading && (data.length > 0) && (\n                    <div className=\"mt-4 flex justify-around gap-x-4 text-center\">\n                        {average6MonthReturn !== null && (\n                            <div className=\"text-lg\">\n                                <span className=\"text-gray-400 block text-sm\">Signal Avg 6M Return</span>\n                                <span className={`font-bold text-xl ${average6MonthReturn > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                                    {average6MonthReturn}%\n                                </span>\n                            </div>\n                        )}\n                        {averageReturn !== null && (\n                            <div className=\"text-lg\">\n                                <span className=\"text-gray-400 block text-sm\">Signal Avg 12M Return</span>\n                                <span className={`font-bold text-xl ${averageReturn > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                                    {averageReturn}%\n                                </span>\n                            </div>\n                        )}\n                        {benchmarkAverageReturn !== null && (\n                            <div className=\"text-lg\">\n                                <span className=\"text-gray-400 block text-sm\">S&P 500 Avg 12M Return</span>\n                                <span className={`font-bold text-xl ${benchmarkAverageReturn > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                                    {benchmarkAverageReturn}%\n                                </span>\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n          </div>\n\n          <div className=\"space-y-8\">\n            <div className=\"bg-gray-800 p-6 rounded-xl shadow-lg text-center\"><h2 className=\"text-xl font-semibold mb-4 text-white\">Market Entry Signal</h2><p className={`text-4xl font-bold ${signal.color}`}>{signal.message}</p><p className=\"text-gray-400 mt-2\">Based on latest data</p></div>\n            <div className=\"bg-gray-800 p-6 rounded-xl shadow-lg\"><h2 className=\"text-xl font-semibold mb-4 text-white\">Latest Data</h2><div className=\"space-y-3\"><div className=\"flex justify-between items-center\"><span className=\"text-gray-400\">S&P 500:</span><span className=\"text-2xl font-bold text-blue-400\">{!isLoading && data.length > 0 ? data[data.length - 1].spx.toFixed(2) : 'N/A'}</span></div><div className=\"flex justify-between items-center\"><span className=\"text-gray-400\">VIX:</span><span className=\"text-2xl font-bold text-yellow-400\">{!isLoading && data.length > 0 && data[data.length-1].vix ? data[data.length - 1].vix.toFixed(2) : 'N/A'}</span></div></div></div>\n            <div className=\"bg-gray-800 p-6 rounded-xl shadow-lg\"><h2 className=\"text-xl font-semibold mb-2 text-white\">Methodology</h2><p className=\"text-gray-400 text-sm\">This tool uses the VIX, often called the \"fear index,\" to gauge market sentiment. A high VIX suggests fear and potential market bottoms.<br/><br/>The signal turns to <strong className=\"text-green-500\">\"Good Time to Enter\"</strong> when the VIX has been high (above 30) and shows signs of declining, suggesting fear is subsiding. This is a contrarian indicator.</p></div>\n          </div>\n        </div>\n\n        {/* --- Historical Signals Table --- */}\n        <div className=\"mt-8 bg-gray-800 rounded-xl shadow-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Historical Buy Signals ({timeFrame === 'Custom' && customStartDate && customEndDate ? `${customStartDate} to ${customEndDate}` : timeFrame})</h2>\n            {!isLoading && data.length > 0 && (\n                historicalSignals.length > 0 ? (\n                    <div className=\"overflow-x-auto max-h-96\">\n                        <table className=\"w-full text-sm text-left text-gray-300\">\n                            <thead className=\"text-xs text-cyan-400 uppercase bg-gray-700 sticky top-0\">\n                            <tr>\n                                <th scope=\"col\" className=\"px-6 py-3\">Date</th>\n                                <th scope=\"col\" className=\"px-6 py-3\">S&P 500</th>\n                                <th scope=\"col\" className=\"px-6 py-3\">VIX</th>\n                                <th scope=\"col\" className=\"px-6 py-3\">6-Month Return</th>\n                                <th scope=\"col\" className=\"px-6 py-3\">12-Month Return</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            {historicalSignals.map((signal, index) => (\n                                <tr key={index} className=\"bg-gray-800 border-b border-gray-700 hover:bg-gray-600\">\n                                <td className=\"px-6 py-4\">{new Date(signal.date).toLocaleDateString()}</td>\n                                <td className=\"px-6 py-4\">{signal.spxOnSignal.toFixed(2)}</td>\n                                <td className=\"px-6 py-4\">{signal.vixOnSignal.toFixed(2)}</td>\n                                <td className={`px-6 py-4 font-bold ${\n                                    signal.sixMonthForwardReturn === null \n                                    ? 'text-gray-400' \n                                    : (parseFloat(signal.sixMonthForwardReturn) > 0 ? 'text-green-400' : 'text-red-400')\n                                }`}>\n                                    {signal.sixMonthForwardReturn !== null ? `${signal.sixMonthForwardReturn}%` : 'Pending...'}\n                                </td>\n                                <td className={`px-6 py-4 font-bold ${\n                                    signal.forwardReturn === null \n                                    ? 'text-gray-400' \n                                    : (parseFloat(signal.forwardReturn) > 0 ? 'text-green-400' : 'text-red-400')\n                                }`}>\n                                    {signal.forwardReturn !== null ? `${signal.forwardReturn}%` : 'Pending...'}\n                                </td>\n                                </tr>\n                            ))}\n                            </tbody>\n                        </table>\n                    </div>\n                ) : (\n                    <div className=\"text-center text-gray-400 py-8\">\n                        No historical buy signals found for this period.\n                    </div>\n                )\n            )}\n            {isLoading && (\n                <div className=\"text-center text-gray-400 py-8\">\n                    Loading historical data...\n                </div>\n            )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,WAAW,KAAQ,OAAO,CACxE,OAASC,SAAS,CAAEC,IAAI,CAAEC,KAAK,CAAEC,KAAK,CAAEC,aAAa,CAAEC,OAAO,CAAEC,MAAM,CAAEC,mBAAmB,CAAEC,aAAa,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7H,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACoB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACsB,MAAM,CAAEC,SAAS,CAAC,CAAGvB,QAAQ,CAAC,CAAEwB,OAAO,CAAE,YAAY,CAAEC,KAAK,CAAE,eAAgB,CAAC,CAAC,CACvF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC8B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACgC,aAAa,CAAEC,gBAAgB,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACkC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CACpE,KAAM,CAACoC,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGrC,QAAQ,CAAC,IAAI,CAAC,CAC1E,KAAM,CAACsC,eAAe,CAAEC,kBAAkB,CAAC,CAAGvC,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACwC,aAAa,CAAEC,gBAAgB,CAAC,CAAGzC,QAAQ,CAAC,EAAE,CAAC,CAGtD;AACA,KAAM,CAAA0C,SAAS,CAAGvC,WAAW,CAAC,SAAY,CACxC,GAAIiB,SAAS,GAAK,QAAQ,GAAK,CAACkB,eAAe,EAAI,CAACE,aAAa,CAAC,CAAE,CAChEX,QAAQ,CAAC,+DAA+D,CAAC,CACzE,OACJ,CAEAF,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CACdE,oBAAoB,CAAC,EAAE,CAAC,CACxBE,gBAAgB,CAAC,IAAI,CAAC,CACtBE,sBAAsB,CAAC,IAAI,CAAC,CAC5BE,yBAAyB,CAAC,IAAI,CAAC,CAC/Bd,SAAS,CAAC,CAAEC,OAAO,CAAE,iBAAiB,CAAEC,KAAK,CAAE,eAAgB,CAAC,CAAC,CAEjE;AACA,GAAI,CAAAkB,gBAAgB,CAAEC,cAAc,CACpC,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAExB,GAAI1B,SAAS,GAAK,QAAQ,CAAE,CACxBuB,gBAAgB,CAAG,GAAI,CAAAG,IAAI,CAACR,eAAe,CAAC,CAC5CM,cAAc,CAAG,GAAI,CAAAE,IAAI,CAACN,aAAa,CAAC,CAC5C,CAAC,IAAM,CACHI,cAAc,CAAG,GAAI,CAAAE,IAAI,CAAC,CAAC,CAAE;AAC7BH,gBAAgB,CAAG,GAAI,CAAAG,IAAI,CAAC,CAAC,CAC7B,GAAI,CAAAC,eAAe,CAAG,CAAC,CACvB,OAAO3B,SAAS,EACZ,IAAK,IAAI,CAAE2B,eAAe,CAAG,CAAC,CAAE,MAChC,IAAK,IAAI,CAAEA,eAAe,CAAG,CAAC,CAAE,MAChC,IAAK,KAAK,CAAEA,eAAe,CAAG,EAAE,CAAE,MAClC,IAAK,KAAK,CAAEA,eAAe,CAAG,EAAE,CAAE,MAClC,IAAK,KAAK,CAAEA,eAAe,CAAG,EAAE,CAAE,MAClC,QAASA,eAAe,CAAG,CAAC,CAChC,CACAJ,gBAAgB,CAACK,WAAW,CAACL,gBAAgB,CAACM,WAAW,CAAC,CAAC,CAAGF,eAAe,CAAC,CAClF,CAEA;AACA,KAAM,CAAAG,cAAc,CAAGP,gBAAgB,CACvC,KAAM,CAAAQ,YAAY,CAAG,GAAI,CAAAL,IAAI,CAACF,cAAc,CAAC,CAC7CO,YAAY,CAACH,WAAW,CAACG,YAAY,CAACF,WAAW,CAAC,CAAC,CAAG,CAAC,CAAC,CAExD,KAAM,CAAAG,cAAc,CAAGC,IAAI,CAACC,KAAK,CAACJ,cAAc,CAACK,OAAO,CAAC,CAAC,CAAG,IAAI,CAAC,CAClE,KAAM,CAAAC,YAAY,CAAGH,IAAI,CAACI,GAAG,CAACJ,IAAI,CAACC,KAAK,CAACH,YAAY,CAACI,OAAO,CAAC,CAAC,CAAG,IAAI,CAAC,CAAEF,IAAI,CAACC,KAAK,CAACT,KAAK,CAACU,OAAO,CAAC,CAAC,CAAG,IAAI,CAAC,CAAC,CAG5G;AACA,KAAM,CAAAG,QAAQ,CAAG,wBAAwB,CACzC,KAAM,CAAAC,cAAc,CAAG,qEAAqEP,cAAc,YAAYI,YAAY,6BAA6B,CAC/J,KAAM,CAAAI,cAAc,CAAG,oEAAoER,cAAc,YAAYI,YAAY,6BAA6B,CAE9J,KAAM,CAAAK,MAAM,CAAGH,QAAQ,CAAGI,kBAAkB,CAACH,cAAc,CAAC,CAC5D,KAAM,CAAAI,MAAM,CAAGL,QAAQ,CAAGI,kBAAkB,CAACF,cAAc,CAAC,CAE5D,GAAI,CACF,KAAM,CAACI,WAAW,CAAEC,WAAW,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACnDC,KAAK,CAACP,MAAM,CAAC,CACbO,KAAK,CAACL,MAAM,CAAC,CACd,CAAC,CAEF,GAAI,CAACC,WAAW,CAACK,EAAE,EAAI,CAACJ,WAAW,CAACI,EAAE,CAAE,CACtC,KAAM,IAAI,CAAAC,KAAK,CAAC,oGAAoG,CAAC,CACvH,CAEA,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAP,WAAW,CAACQ,IAAI,CAAC,CAAC,CACxC,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAR,WAAW,CAACO,IAAI,CAAC,CAAC,CAExC;AACA,KAAM,CAAAE,cAAc,CAAIC,QAAQ,EAAK,CACnC,GAAI,CAACA,QAAQ,CAACC,KAAK,CAACC,MAAM,CAAE,MAAO,EAAE,CACrC,KAAM,CAAAA,MAAM,CAAGF,QAAQ,CAACC,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CACvC,GAAI,CAACA,MAAM,CAAE,MAAO,EAAE,CACtB,KAAM,CAAAC,UAAU,CAAGD,MAAM,CAACE,SAAS,CACnC,KAAM,CAAAC,MAAM,CAAGH,MAAM,CAACI,UAAU,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAC/C,MAAO,CAAAL,UAAU,CAACM,GAAG,CAAC,CAACC,EAAE,CAAEC,CAAC,IAAM,CAChCC,IAAI,CAAE,GAAI,CAAAzC,IAAI,CAACuC,EAAE,CAAG,IAAI,CAAC,CAACG,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACrDC,KAAK,CAAEV,MAAM,CAACM,CAAC,CAAC,CAAGK,UAAU,CAACX,MAAM,CAACM,CAAC,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC,CAAG,IACxD,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACJ,KAAK,GAAK,IAAI,CAAC,CACnC,CAAC,CAED,KAAM,CAAAK,OAAO,CAAGrB,cAAc,CAACH,OAAO,CAAC,CACvC,KAAM,CAAAyB,OAAO,CAAGtB,cAAc,CAACD,OAAO,CAAC,CAEvC;AACA,KAAM,CAAAwB,YAAY,CAAGF,OAAO,CAACX,GAAG,CAAEc,QAAQ,EAAK,CAC7C,KAAM,CAAAC,QAAQ,CAAGH,OAAO,CAACI,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACd,IAAI,GAAKW,QAAQ,CAACX,IAAI,CAAC,CAChE,MAAO,CACLA,IAAI,CAAEW,QAAQ,CAACX,IAAI,CACnBe,GAAG,CAAEJ,QAAQ,CAACR,KAAK,CACnBW,GAAG,CAAEF,QAAQ,CAAGA,QAAQ,CAACT,KAAK,CAAG,IACnC,CAAC,CACH,CAAC,CAAC,CAACG,MAAM,CAACU,KAAK,EAAIA,KAAK,CAACF,GAAG,GAAK,IAAI,CAAC,CAEtC;AACA,KAAM,CAAAG,gBAAgB,CAAGP,YAAY,CAACJ,MAAM,CAACC,CAAC,EAAI,CAChD,KAAM,CAAAW,KAAK,CAAG,GAAI,CAAA3D,IAAI,CAACgD,CAAC,CAACP,IAAI,CAAC,CAC9B,MAAO,CAAAkB,KAAK,EAAI9D,gBAAgB,EAAI8D,KAAK,EAAI7D,cAAc,CAC7D,CAAC,CAAC,CACFzB,OAAO,CAACqF,gBAAgB,CAAC,CAEzB;AACA,KAAM,CAAAE,OAAO,CAAG,EAAE,CAClB,IAAK,GAAI,CAAApB,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGW,YAAY,CAACU,MAAM,CAAErB,CAAC,EAAE,CAAE,CAC5C,KAAM,CAAAsB,YAAY,CAAGX,YAAY,CAACX,CAAC,CAAC,CACpC,KAAM,CAAAuB,aAAa,CAAGZ,YAAY,CAACX,CAAC,CAAC,CAAC,CAAC,CAEvC,GAAIuB,aAAa,CAACR,GAAG,CAAG,EAAE,EAAIO,YAAY,CAACP,GAAG,CAAGQ,aAAa,CAACR,GAAG,CAAE,CAClE,KAAM,CAAAS,mBAAmB,CAAG,GAAI,CAAAhE,IAAI,CAAC,GAAI,CAAAA,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACwB,QAAQ,CAAC,GAAI,CAAAjE,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACyB,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAAC,CACtH,KAAM,CAAAC,sBAAsB,CAAG,GAAI,CAAAnE,IAAI,CAAC,GAAI,CAAAA,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACvC,WAAW,CAAC,GAAI,CAAAF,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACtC,WAAW,CAAC,CAAC,CAAG,CAAC,CAAC,CAAC,CAE/H,KAAM,CAAAiE,oBAAoB,CAAGjB,YAAY,CAACG,IAAI,CAACe,CAAC,EAAI,GAAI,CAAArE,IAAI,CAACqE,CAAC,CAAC5B,IAAI,CAAC,EAAIuB,mBAAmB,CAAC,CAC5F,KAAM,CAAAM,uBAAuB,CAAGnB,YAAY,CAACG,IAAI,CAACe,CAAC,EAAI,GAAI,CAAArE,IAAI,CAACqE,CAAC,CAAC5B,IAAI,CAAC,EAAI0B,sBAAsB,CAAC,CAElG,GAAI,CAAAI,cAAc,CAAG,IAAI,CACzB,GAAI,CAAAC,iBAAiB,CAAG,IAAI,CAE5B,GAAIJ,oBAAoB,CAAE,CACxBG,cAAc,CAAI,CAACH,oBAAoB,CAACZ,GAAG,CAAGM,YAAY,CAACN,GAAG,EAAIM,YAAY,CAACN,GAAG,CAAI,GAAG,CAC3F,CACA,GAAIc,uBAAuB,CAAE,CAC3BE,iBAAiB,CAAI,CAACF,uBAAuB,CAACd,GAAG,CAAGM,YAAY,CAACN,GAAG,EAAIM,YAAY,CAACN,GAAG,CAAI,GAAG,CACjG,CAEAI,OAAO,CAACa,IAAI,CAAC,CACXhC,IAAI,CAAEqB,YAAY,CAACrB,IAAI,CACvBiC,WAAW,CAAEZ,YAAY,CAACN,GAAG,CAC7BmB,WAAW,CAAEb,YAAY,CAACP,GAAG,CAC7BqB,qBAAqB,CAAEL,cAAc,GAAK,IAAI,CAAGA,cAAc,CAACzB,OAAO,CAAC,CAAC,CAAC,CAAG,IAAI,CACjF+B,aAAa,CAAEL,iBAAiB,GAAK,IAAI,CAAGA,iBAAiB,CAAC1B,OAAO,CAAC,CAAC,CAAC,CAAG,IAC7E,CAAC,CAAC,CACJ,CACF,CAEA,KAAM,CAAAgC,eAAe,CAAGlB,OAAO,CAACb,MAAM,CAACgC,CAAC,EAAI,CAC1C,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAhF,IAAI,CAAC+E,CAAC,CAACtC,IAAI,CAAC,CAC9B,MAAO,CAAAuC,KAAK,EAAInF,gBAAgB,EAAImF,KAAK,EAAIlF,cAAc,CAC7D,CAAC,CAAC,CACFb,oBAAoB,CAAC6F,eAAe,CAAC,CAErC,GAAIA,eAAe,CAACjB,MAAM,CAAG,CAAC,CAAE,CAC9B,KAAM,CAAAoB,oBAAoB,CAAGH,eAAe,CAAC/B,MAAM,CAACgC,CAAC,EAAIA,CAAC,CAACH,qBAAqB,GAAK,IAAI,CAAC,CAC1F,GAAIK,oBAAoB,CAACpB,MAAM,CAAG,CAAC,CAAE,CACjC,KAAM,CAAAqB,aAAa,CAAGD,oBAAoB,CAACE,MAAM,CAAC,CAACC,GAAG,CAAE5G,MAAM,GAAK4G,GAAG,CAAGvC,UAAU,CAACrE,MAAM,CAACoG,qBAAqB,CAAC,CAAE,CAAC,CAAC,CACrHvF,sBAAsB,CAAC,CAAC6F,aAAa,CAAGD,oBAAoB,CAACpB,MAAM,EAAEf,OAAO,CAAC,CAAC,CAAC,CAAC,CACpF,CAEA,KAAM,CAAAuC,qBAAqB,CAAGP,eAAe,CAAC/B,MAAM,CAACgC,CAAC,EAAIA,CAAC,CAACF,aAAa,GAAK,IAAI,CAAC,CACnF,GAAIQ,qBAAqB,CAACxB,MAAM,CAAG,CAAC,CAAE,CAClC,KAAM,CAAAyB,cAAc,CAAGD,qBAAqB,CAACF,MAAM,CAAC,CAACC,GAAG,CAAE5G,MAAM,GAAK4G,GAAG,CAAGvC,UAAU,CAACrE,MAAM,CAACqG,aAAa,CAAC,CAAE,CAAC,CAAC,CAC/G1F,gBAAgB,CAAC,CAACmG,cAAc,CAAGD,qBAAqB,CAACxB,MAAM,EAAEf,OAAO,CAAC,CAAC,CAAC,CAAC,CAChF,CACF,CAEA;AACA,KAAM,CAAAyC,gBAAgB,CAAG,EAAE,CAC3B,IAAK,GAAI,CAAA/C,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGkB,gBAAgB,CAACG,MAAM,CAAErB,CAAC,EAAE,CAAE,CAChD,KAAM,CAAAsB,YAAY,CAAGJ,gBAAgB,CAAClB,CAAC,CAAC,CACxC,KAAM,CAAAgD,WAAW,CAAG,GAAI,CAAAxF,IAAI,CAAC,GAAI,CAAAA,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACvC,WAAW,CAAC,GAAI,CAAAF,IAAI,CAAC8D,YAAY,CAACrB,IAAI,CAAC,CAACtC,WAAW,CAAC,CAAC,CAAG,CAAC,CAAC,CAAC,CACpH,KAAM,CAAAsF,YAAY,CAAGtC,YAAY,CAACG,IAAI,CAACe,CAAC,EAAI,GAAI,CAAArE,IAAI,CAACqE,CAAC,CAAC5B,IAAI,CAAC,EAAI+C,WAAW,CAAC,CAC5E,GAAIC,YAAY,CAAE,CACd,KAAM,CAAAC,SAAS,CAAI,CAACD,YAAY,CAACjC,GAAG,CAAGM,YAAY,CAACN,GAAG,EAAIM,YAAY,CAACN,GAAG,CAAI,GAAG,CAClF+B,gBAAgB,CAACd,IAAI,CAACiB,SAAS,CAAC,CACpC,CACF,CACA,GAAIH,gBAAgB,CAAC1B,MAAM,CAAG,CAAC,CAAE,CAC/B,KAAM,CAAA8B,oBAAoB,CAAGJ,gBAAgB,CAACJ,MAAM,CAAC,CAACC,GAAG,CAAEQ,GAAG,GAAKR,GAAG,CAAGQ,GAAG,CAAE,CAAC,CAAC,CAChFrG,yBAAyB,CAAC,CAACoG,oBAAoB,CAAGJ,gBAAgB,CAAC1B,MAAM,EAAEf,OAAO,CAAC,CAAC,CAAC,CAAC,CACxF,CAEA,GAAIY,gBAAgB,CAACG,MAAM,EAAI,CAAC,CAAE,CAChC,KAAM,CAAAgC,WAAW,CAAGnC,gBAAgB,CAACA,gBAAgB,CAACG,MAAM,CAAG,CAAC,CAAC,CACjE,KAAM,CAAAE,aAAa,CAAGL,gBAAgB,CAACA,gBAAgB,CAACG,MAAM,CAAG,CAAC,CAAC,CACnE,GAAIE,aAAa,CAACR,GAAG,CAAG,EAAE,EAAIsC,WAAW,CAACtC,GAAG,CAAGQ,aAAa,CAACR,GAAG,CAAE,CACjE9E,SAAS,CAAC,CAAEC,OAAO,CAAE,oBAAoB,CAAEC,KAAK,CAAE,gBAAiB,CAAC,CAAC,CACvE,CAAC,IAAM,IAAIkH,WAAW,CAACtC,GAAG,CAAG,EAAE,CAAE,CAC/B9E,SAAS,CAAC,CAAEC,OAAO,CAAE,oBAAoB,CAAEC,KAAK,CAAE,iBAAkB,CAAC,CAAC,CACxE,CAAC,IAAM,CACLF,SAAS,CAAC,CAAEC,OAAO,CAAE,MAAM,CAAEC,KAAK,CAAE,cAAe,CAAC,CAAC,CACvD,CACF,CAAC,IAAM,CACLF,SAAS,CAAC,CAAEC,OAAO,CAAE,SAAS,CAAEC,KAAK,CAAE,iBAAkB,CAAC,CAAC,CAC7D,CAEF,CAAE,MAAOmH,GAAG,CAAE,CACZ/G,QAAQ,CAAC+G,GAAG,CAACpH,OAAO,CAAC,CACrBD,SAAS,CAAC,CAAEC,OAAO,CAAE,OAAO,CAAEC,KAAK,CAAE,cAAe,CAAC,CAAC,CACxD,CAAC,OAAS,CACRE,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAAE,CAACP,SAAS,CAAEkB,eAAe,CAAEE,aAAa,CAAC,CAAC,CAE/CvC,SAAS,CAAC,IAAM,CACd,GAAImB,SAAS,GAAK,QAAQ,CAAE,CACxBsB,SAAS,CAAC,CAAC,CACf,CACF,CAAC,CAAE,CAACtB,SAAS,CAAEsB,SAAS,CAAC,CAAC,CAE1B,KAAM,CAAAmG,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAIvG,eAAe,EAAIE,aAAa,CAAE,CAClC,GAAI,GAAI,CAAAM,IAAI,CAACR,eAAe,CAAC,CAAG,GAAI,CAAAQ,IAAI,CAACN,aAAa,CAAC,CAAE,CACrDX,QAAQ,CAAC,sCAAsC,CAAC,CAChD,OACJ,CACAa,SAAS,CAAC,CAAC,CACf,CAAC,IAAM,CACHb,QAAQ,CAAC,0CAA0C,CAAC,CACxD,CACF,CAAC,CAED,KAAM,CAAAiH,aAAa,CAAG5I,OAAO,CAAC,IAAM,CAClC,MAAO,CAAAgB,IAAI,CAACkE,GAAG,CAACU,CAAC,GAAK,CACpB,GAAGA,CAAC,CACJP,IAAI,CAAE,GAAI,CAAAzC,IAAI,CAACgD,CAAC,CAACP,IAAI,CAAC,CAACwD,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,OAAO,CAAEC,GAAG,CAAE,SAAU,CAAC,CACxG,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,CAAChI,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAiI,WAAW,CAAIC,QAAQ,EAAK,CAChC,KAAM,CAAA7D,IAAI,CAAG,GAAI,CAAAzC,IAAI,CAACsG,QAAQ,CAAC,CAC/B,GAAIhI,SAAS,GAAK,IAAI,EAAIA,SAAS,GAAK,IAAI,EAAIA,SAAS,GAAK,IAAI,CAAE,CAChE,KAAM,CAAA6H,KAAK,CAAG1D,IAAI,CAACwD,kBAAkB,CAAC,OAAO,CAAE,CAAEE,KAAK,CAAE,OAAQ,CAAC,CAAC,CAClE,KAAM,CAAAD,IAAI,CAAGzD,IAAI,CAACtC,WAAW,CAAC,CAAC,CAACoG,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACpD,MAAO,GAAGL,KAAK,IAAID,IAAI,EAAE,CAC7B,CACA,MAAO,CAAAzD,IAAI,CAACtC,WAAW,CAAC,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAsG,UAAU,CAAG,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,QAAQ,CAAC,CAEpE,mBACEzI,IAAA,QAAK0I,SAAS,CAAC,iEAAiE,CAAAC,QAAA,cAC9EzI,KAAA,QAAKwI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzI,KAAA,WAAQwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACtB3I,IAAA,OAAI0I,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,qCAAmC,CAAI,CAAC,cACrG3I,IAAA,MAAG0I,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,wGAAsG,CAAG,CAAC,EACtI,CAAC,cAETzI,KAAA,QAAKwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDzI,KAAA,QAAKwI,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B3I,IAAA,QAAK0I,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CACjEF,UAAU,CAACnE,GAAG,CAACsE,EAAE,eACd5I,IAAA,WAAiB6I,OAAO,CAAEA,CAAA,GAAMtI,YAAY,CAACqI,EAAE,CAAE,CAACE,QAAQ,CAAElI,SAAU,CAAC8H,SAAS,CAAE,8DAA+DpI,SAAS,GAAKsI,EAAE,CAAG,wBAAwB,CAAG,6CAA6C,kDAAoD,CAAAD,QAAA,CAC3RC,EAAE,EADMA,EAEL,CACX,CAAC,CACD,CAAC,CAELtI,SAAS,GAAK,QAAQ,eACnBJ,KAAA,QAAKwI,SAAS,CAAC,qEAAqE,CAAAC,QAAA,eAChFzI,KAAA,QAAAyI,QAAA,eACI3I,IAAA,UAAO+I,OAAO,CAAC,WAAW,CAACL,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cACtG3I,IAAA,UAAOgJ,IAAI,CAAC,MAAM,CAACC,EAAE,CAAC,WAAW,CAACC,KAAK,CAAE1H,eAAgB,CAAC2H,QAAQ,CAAEC,CAAC,EAAI3H,kBAAkB,CAAC2H,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAACR,SAAS,CAAC,kHAAkH,CAAC,CAAC,EAC1O,CAAC,cACNxI,KAAA,QAAAyI,QAAA,eACI3I,IAAA,UAAO+I,OAAO,CAAC,SAAS,CAACL,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAClG3I,IAAA,UAAOgJ,IAAI,CAAC,MAAM,CAACC,EAAE,CAAC,SAAS,CAACC,KAAK,CAAExH,aAAc,CAACyH,QAAQ,CAAEC,CAAC,EAAIzH,gBAAgB,CAACyH,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAACR,SAAS,CAAC,kHAAkH,CAAC,CAAC,EACpO,CAAC,cACN1I,IAAA,WAAQ6I,OAAO,CAAEd,sBAAuB,CAACe,QAAQ,CAAElI,SAAU,CAAC8H,SAAS,CAAC,qGAAqG,CAAAC,QAAA,CAAC,OAAK,CAAQ,CAAC,EAC3L,CACR,cAEDzI,KAAA,QAAKwI,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eACjDzI,KAAA,OAAIwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,mBAAiB,CAACrI,SAAS,GAAK,QAAQ,EAAIkB,eAAe,EAAIE,aAAa,CAAG,GAAGF,eAAe,OAAOE,aAAa,EAAE,CAAGpB,SAAS,CAAC,GAAC,EAAI,CAAC,cAChMN,IAAA,CAACH,mBAAmB,EAACyJ,KAAK,CAAC,MAAM,CAACC,MAAM,CAAE,GAAI,CAAAZ,QAAA,CACzC/H,SAAS,cAAKZ,IAAA,QAAK0I,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,uBAAqB,CAAK,CAAC,CAC7G7H,KAAK,cAAKZ,KAAA,QAAKwI,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAAC3I,IAAA,SAAM0I,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE7H,KAAK,CAAO,CAAC,cAAAd,IAAA,WAAQ6I,OAAO,CAAEjH,SAAU,CAAC8G,SAAS,CAAC,sFAAsF,CAAAC,QAAA,CAAC,OAAK,CAAQ,CAAC,EAAK,CAAC,CAC1RvI,IAAI,CAACyF,MAAM,CAAG,CAAC,cACf3F,KAAA,CAACZ,SAAS,EAACc,IAAI,CAAE4H,aAAc,CAACwB,MAAM,CAAE,CAAEC,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,CAAC,EAAE,CAAEC,MAAM,CAAE,CAAE,CAAE,CAAAjB,QAAA,eAChF3I,IAAA,CAACN,aAAa,EAACmK,eAAe,CAAC,KAAK,CAACC,MAAM,CAAC,SAAS,CAAE,CAAC,cACxD9J,IAAA,CAACR,KAAK,EAACuK,OAAO,CAAC,MAAM,CAACD,MAAM,CAAC,SAAS,CAACE,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAACC,aAAa,CAAE7B,WAAY,CAAE,CAAC,cAC7FrI,IAAA,CAACP,KAAK,EAAC0K,OAAO,CAAC,MAAM,CAACL,MAAM,CAAC,SAAS,CAACM,KAAK,CAAE,CAAElB,KAAK,CAAE,iBAAiB,CAAEmB,KAAK,CAAE,CAAC,EAAE,CAAEC,QAAQ,CAAE,YAAY,CAAEC,IAAI,CAAE,SAAU,CAAE,CAACP,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAACO,MAAM,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,CAAE,CAAC,cAC3LxK,IAAA,CAACP,KAAK,EAAC0K,OAAO,CAAC,OAAO,CAACM,WAAW,CAAC,OAAO,CAACX,MAAM,CAAC,SAAS,CAACM,KAAK,CAAE,CAAElB,KAAK,CAAE,YAAY,CAAEmB,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,aAAa,CAAEC,IAAI,CAAE,SAAU,CAAE,CAACP,IAAI,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAAE,CAAC,cAC3KjK,IAAA,CAACL,OAAO,EAAC+K,YAAY,CAAE,CAAEC,eAAe,CAAE,SAAS,CAAEC,MAAM,CAAE,mBAAoB,CAAE,CAACC,UAAU,CAAE,CAAElK,KAAK,CAAE,SAAU,CAAE,CAAE,CAAC,cACxHX,IAAA,CAACJ,MAAM,GAAE,CAAC,cACVI,IAAA,CAACT,IAAI,EAAC4K,OAAO,CAAC,MAAM,CAACnB,IAAI,CAAC,UAAU,CAACe,OAAO,CAAC,KAAK,CAACD,MAAM,CAAC,SAAS,CAACgB,WAAW,CAAE,CAAE,CAACC,GAAG,CAAE,KAAM,CAACC,IAAI,CAAC,SAAS,CAAE,CAAC,cACjHhL,IAAA,CAACT,IAAI,EAAC4K,OAAO,CAAC,OAAO,CAACnB,IAAI,CAAC,UAAU,CAACe,OAAO,CAAC,KAAK,CAACD,MAAM,CAAC,SAAS,CAACgB,WAAW,CAAE,CAAE,CAACC,GAAG,CAAE,KAAM,CAACC,IAAI,CAAC,KAAK,CAAE,CAAC,cAC9GhL,IAAA,CAACF,aAAa,EAACqK,OAAO,CAAC,OAAO,CAACc,CAAC,CAAE,EAAG,CAACb,KAAK,CAAE,CAAElB,KAAK,CAAE,WAAW,CAAEoB,QAAQ,CAAE,gBAAgB,CAAEC,IAAI,CAAE,SAAU,CAAE,CAACT,MAAM,CAAC,SAAS,CAACD,eAAe,CAAC,KAAK,CAAE,CAAC,EACpJ,CAAC,cACV7J,IAAA,QAAK0I,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,2CAAyC,CAAK,CAAG,CAC7G,CAAC,CAErB,CAAC/H,SAAS,EAAKR,IAAI,CAACyF,MAAM,CAAG,CAAE,eAC5B3F,KAAA,QAAKwI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EACxDvH,mBAAmB,GAAK,IAAI,eACzBlB,KAAA,QAAKwI,SAAS,CAAC,SAAS,CAAAC,QAAA,eACpB3I,IAAA,SAAM0I,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,sBAAoB,CAAM,CAAC,cACzEzI,KAAA,SAAMwI,SAAS,CAAE,qBAAqBtH,mBAAmB,CAAG,CAAC,CAAG,gBAAgB,CAAG,cAAc,EAAG,CAAAuH,QAAA,EAC/FvH,mBAAmB,CAAC,GACzB,EAAM,CAAC,EACN,CACR,CACAF,aAAa,GAAK,IAAI,eACnBhB,KAAA,QAAKwI,SAAS,CAAC,SAAS,CAAAC,QAAA,eACpB3I,IAAA,SAAM0I,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,uBAAqB,CAAM,CAAC,cAC1EzI,KAAA,SAAMwI,SAAS,CAAE,qBAAqBxH,aAAa,CAAG,CAAC,CAAG,gBAAgB,CAAG,cAAc,EAAG,CAAAyH,QAAA,EACzFzH,aAAa,CAAC,GACnB,EAAM,CAAC,EACN,CACR,CACAI,sBAAsB,GAAK,IAAI,eAC5BpB,KAAA,QAAKwI,SAAS,CAAC,SAAS,CAAAC,QAAA,eACpB3I,IAAA,SAAM0I,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CAAC,cAC3EzI,KAAA,SAAMwI,SAAS,CAAE,qBAAqBpH,sBAAsB,CAAG,CAAC,CAAG,gBAAgB,CAAG,cAAc,EAAG,CAAAqH,QAAA,EAClGrH,sBAAsB,CAAC,GAC5B,EAAM,CAAC,EACN,CACR,EACA,CACR,EACA,CAAC,EACH,CAAC,cAENpB,KAAA,QAAKwI,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzI,KAAA,QAAKwI,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAAC3I,IAAA,OAAI0I,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAAA3I,IAAA,MAAG0I,SAAS,CAAE,sBAAsBlI,MAAM,CAACG,KAAK,EAAG,CAAAgI,QAAA,CAAEnI,MAAM,CAACE,OAAO,CAAI,CAAC,cAAAV,IAAA,MAAG0I,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,EAAK,CAAC,cACxRzI,KAAA,QAAKwI,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eAAC3I,IAAA,OAAI0I,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cAAAzI,KAAA,QAAKwI,SAAS,CAAC,WAAW,CAAAC,QAAA,eAACzI,KAAA,QAAKwI,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAAC3I,IAAA,SAAM0I,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAAA3I,IAAA,SAAM0I,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAE,CAAC/H,SAAS,EAAIR,IAAI,CAACyF,MAAM,CAAG,CAAC,CAAGzF,IAAI,CAACA,IAAI,CAACyF,MAAM,CAAG,CAAC,CAAC,CAACL,GAAG,CAACV,OAAO,CAAC,CAAC,CAAC,CAAG,KAAK,CAAO,CAAC,EAAK,CAAC,cAAA5E,KAAA,QAAKwI,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAAC3I,IAAA,SAAM0I,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,cAAA3I,IAAA,SAAM0I,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAE,CAAC/H,SAAS,EAAIR,IAAI,CAACyF,MAAM,CAAG,CAAC,EAAIzF,IAAI,CAACA,IAAI,CAACyF,MAAM,CAAC,CAAC,CAAC,CAACN,GAAG,CAAGnF,IAAI,CAACA,IAAI,CAACyF,MAAM,CAAG,CAAC,CAAC,CAACN,GAAG,CAACT,OAAO,CAAC,CAAC,CAAC,CAAG,KAAK,CAAO,CAAC,EAAK,CAAC,EAAK,CAAC,EAAK,CAAC,cAC5pB5E,KAAA,QAAKwI,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eAAC3I,IAAA,OAAI0I,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cAAAzI,KAAA,MAAGwI,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,4IAAwI,cAAA3I,IAAA,QAAI,CAAC,cAAAA,IAAA,QAAI,CAAC,uBAAoB,cAAAA,IAAA,WAAQ0I,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,wBAAoB,CAAQ,CAAC,qIAAkI,EAAG,CAAC,EAAK,CAAC,EAChhB,CAAC,EACH,CAAC,cAGNzI,KAAA,QAAKwI,SAAS,CAAC,2CAA2C,CAAAC,QAAA,eACtDzI,KAAA,OAAIwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,0BAAwB,CAACrI,SAAS,GAAK,QAAQ,EAAIkB,eAAe,EAAIE,aAAa,CAAG,GAAGF,eAAe,OAAOE,aAAa,EAAE,CAAGpB,SAAS,CAAC,GAAC,EAAI,CAAC,CACtM,CAACM,SAAS,EAAIR,IAAI,CAACyF,MAAM,CAAG,CAAC,GAC1B7E,iBAAiB,CAAC6E,MAAM,CAAG,CAAC,cACxB7F,IAAA,QAAK0I,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACrCzI,KAAA,UAAOwI,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD3I,IAAA,UAAO0I,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cAC3EzI,KAAA,OAAAyI,QAAA,eACI3I,IAAA,OAAIkL,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,cAC/C3I,IAAA,OAAIkL,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAClD3I,IAAA,OAAIkL,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,KAAG,CAAI,CAAC,cAC9C3I,IAAA,OAAIkL,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACzD3I,IAAA,OAAIkL,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,EAC1D,CAAC,CACE,CAAC,cACR3I,IAAA,UAAA2I,QAAA,CACC3H,iBAAiB,CAACsD,GAAG,CAAC,CAAC9D,MAAM,CAAE2K,KAAK,gBACjCjL,KAAA,OAAgBwI,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eAClF3I,IAAA,OAAI0I,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE,GAAI,CAAA3G,IAAI,CAACxB,MAAM,CAACiE,IAAI,CAAC,CAACwD,kBAAkB,CAAC,CAAC,CAAK,CAAC,cAC3EjI,IAAA,OAAI0I,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEnI,MAAM,CAACkG,WAAW,CAAC5B,OAAO,CAAC,CAAC,CAAC,CAAK,CAAC,cAC9D9E,IAAA,OAAI0I,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEnI,MAAM,CAACmG,WAAW,CAAC7B,OAAO,CAAC,CAAC,CAAC,CAAK,CAAC,cAC9D9E,IAAA,OAAI0I,SAAS,CAAE,uBACXlI,MAAM,CAACoG,qBAAqB,GAAK,IAAI,CACnC,eAAe,CACd/B,UAAU,CAACrE,MAAM,CAACoG,qBAAqB,CAAC,CAAG,CAAC,CAAG,gBAAgB,CAAG,cAAe,EACrF,CAAA+B,QAAA,CACEnI,MAAM,CAACoG,qBAAqB,GAAK,IAAI,CAAG,GAAGpG,MAAM,CAACoG,qBAAqB,GAAG,CAAG,YAAY,CAC1F,CAAC,cACL5G,IAAA,OAAI0I,SAAS,CAAE,uBACXlI,MAAM,CAACqG,aAAa,GAAK,IAAI,CAC3B,eAAe,CACdhC,UAAU,CAACrE,MAAM,CAACqG,aAAa,CAAC,CAAG,CAAC,CAAG,gBAAgB,CAAG,cAAe,EAC7E,CAAA8B,QAAA,CACEnI,MAAM,CAACqG,aAAa,GAAK,IAAI,CAAG,GAAGrG,MAAM,CAACqG,aAAa,GAAG,CAAG,YAAY,CAC1E,CAAC,GAjBIsE,KAkBL,CACP,CAAC,CACK,CAAC,EACL,CAAC,CACP,CAAC,cAENnL,IAAA,QAAK0I,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,kDAEhD,CAAK,CACR,CACJ,CACA/H,SAAS,eACNZ,IAAA,QAAK0I,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,4BAEhD,CAAK,CACR,EACA,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxI,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}